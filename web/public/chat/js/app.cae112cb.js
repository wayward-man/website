(function(t){function e(e){for(var o,s,a=e[0],c=e[1],u=e[2],f=0,d=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},r=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"148f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("HelloWorld")},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page_wrap"},[n("aside",{staticClass:"reset_wrap",on:{click:t.resetInfo}},[t._v("set")]),n("section",{staticClass:"header_wrap"},[n("p",{staticClass:"online_num"},[t._v("当前在线人数"+t._s(t.onlineNum))])]),t.isLogin?t._e():n("section",{staticClass:"password_wrap"},[n("aside",{staticClass:"pwd_tips_wrap"},[n("div",{staticClass:"pwd_input_wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.uniqId,expression:"uniqId"}],staticClass:"pwd_input_area",attrs:{placeholder:"请输入绝密id",type:"text "},domProps:{value:t.uniqId},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doConfirm(e)},input:function(e){e.target.composing||(t.uniqId=e.target.value)}}})]),n("div",{staticClass:"pwd_input_wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.name,expression:"userInfo.name"}],staticClass:"pwd_input_area",attrs:{placeholder:"请输入名字",type:"text "},domProps:{value:t.userInfo.name},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doConfirm(e)},input:function(e){e.target.composing||t.$set(t.userInfo,"name",e.target.value)}}})]),n("aside",{staticClass:"btn_confirm",on:{click:t.doConfirm}},[t._v("确认")])])]),n("section",{ref:"chatDomWrap",staticClass:"chat_wrap"},[n("div",{ref:"chatDom",staticClass:"msg_wrap_container"},t._l(t.filterChatList,function(e,o){return n("div",{key:o,staticClass:"msg_wrap",class:{isMe:e.__isMe}},[e.__isMe?t._e():n("aside",{staticClass:"user_wrap"},[t._v(t._s(e.name))]),n("aside",{staticClass:"msg",class:{isMe:e.__isMe}},[t._v(t._s(e.msg))]),e.__isMe?n("aside",{staticClass:"user_wrap"},[t._v(t._s(e.name))]):t._e()])}),0)]),n("section",{staticClass:"input_wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.curContent,expression:"curContent"}],staticClass:"input_area",attrs:{type:"text "},domProps:{value:t.curContent},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doClick(e)},input:function(e){e.target.composing||(t.curContent=e.target.value)}}}),n("aside",{staticClass:"btn_send",on:{click:t.doClick}},[t._v("send")])])])},a=[],c=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("28a5"),n("768b")),u=n("bd86"),l=n("8055"),f=n.n(l);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){Object(u["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var m=f()("ws://106.12.161.139:3000"),h={data:function(){return{uniqId:"",isLogin:!1,password:"",onlineNum:0,pwdList:[{pwd:1587376316756,title:"小恩爱"},{pwd:"admin",title:"小恩爱"}],curContent:"",userInfo:{id:"",name:""},userList:[{uid:"007525639943605444",name:"德龙"},{uid:"7980809627105447",name:"feifei"}],chatList:[]}},watch:{chatList:function(){var t=this;this.$nextTick(function(){t.$refs.chatDomWrap.scrollTo(0,t.$refs.chatDom.offsetHeight)})}},computed:{filterChatList:function(){for(var t=[],e=this.chatList,n=0;n<e.length;n++){var o=!1;e[n].uid===this.userInfo.uid&&(o=!0),t.push(p({},e[n],{__isMe:o}))}return t}},created:function(){if(document.title="小恩爱",this.userInfo.uid)console.log("[log]===> 已经有用户信息了");else{var t=window.localStorage.getItem("userInfo"),e=window.localStorage.getItem("localChatInfos");if(e&&(e=JSON.parse(e),this.chatList=e.list),t){var n=t.split("-"),o=Object(c["a"])(n,3),i=o[0],r=o[1],s=o[2];this.userInfo={uid:i,name:r,uniqId:s},this.isLogin=!0}else console.log("[log]===> 没有用户信息，请输入"),this.isLogin=!1}},mounted:function(){var t=this;m.on("connect",function(){t.userInfo.uniqId&&m.on("sendMsg_".concat(t.userInfo.uniqId),function(e){t.chatList.push(e);var n={list:t.chatList};window.localStorage.setItem("localChatInfos",JSON.stringify(n))}),m.on("showOnlineNum",function(e){t.onlineNum=e.num})})},methods:{resetInfo:function(){this.isLogin=!1},doConfirm:function(){var t=this,e=this.pwdList.filter(function(e){return console.log("pwd==>".concat(e.pwd,", id===>").concat(t.uniqId)),e.pwd==t.uniqId});if(e.length){console.log("[log]==> 检验通过");var n=this.userInfo.uid||Date.now();window.localStorage.setItem("userInfo","".concat(n,"-").concat(this.userInfo.name,"-").concat(this.uniqId)),this.isLogin=!0}else console.log("[log]==>检验失败")},doClick:function(){if(this.curContent){var t=p({msg:this.curContent},this.userInfo);this.curContent="",console.log("[log]==> $emit ","sendMsg_".concat(this.userInfo.uniqId)),m.emit("sendMsg_".concat(this.userInfo.uniqId),t)}else console.log("sorry, you aren't able to send empty msg")}}},g=h,_=(n("fa9a"),n("2877")),v=Object(_["a"])(g,s,a,!1,null,"1c9b7fd2",null),w=v.exports,y={name:"app",components:{HelloWorld:w}},C=y,b=Object(_["a"])(C,i,r,!1,null,null,null),I=b.exports;n("a2f0");o["a"].config.productionTip=!0,new o["a"]({render:function(t){return t(I)}}).$mount("#app")},a2f0:function(t,e,n){},fa9a:function(t,e,n){"use strict";var o=n("148f"),i=n.n(o);i.a}});
//# sourceMappingURL=app.cae112cb.js.map
(function(t){function n(n){for(var i,o,s=n[0],u=n[1],c=n[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(n);while(h.length)h.shift()();return a.push.apply(a,c||[]),e()}function e(){for(var t,n=0;n<a.length;n++){for(var e=a[n],i=!0,s=1;s<e.length;s++){var u=e[s];0!==r[u]&&(i=!1)}i&&(a.splice(n--,1),t=o(o.s=e[0]))}return t}var i={},r={app:0},a=[];function o(n){if(i[n])return i[n].exports;var e=i[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=i,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)o.d(e,i,function(n){return t[n]}.bind(null,i));return e},o.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var l=u;a.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"347d":function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("f751"),e("097d");for(var i=e("2b0e"),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("HelloWorld")},a=[],o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"cavsContainer",staticClass:"page_main"},[e("canvas",{ref:"cavs",attrs:{width:"700",height:"1400"}}),e("aside",{staticClass:"btn",on:{click:t.doClick}},[t._v("add")]),e("div",{staticClass:"input_wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputTxt,expression:"inputTxt"}],attrs:{type:"text"},domProps:{value:t.inputTxt},on:{input:function(n){n.target.composing||(t.inputTxt=n.target.value)}}}),e("aside",{staticClass:"inputBtn",on:{click:t.doSend}},[t._v("send")])])])},s=[],u=e("d225"),c=e("b0b4"),l=e("bd86"),d=function(t,n){var e=n-t;return t+Math.floor(Math.random()*(e+1))},h=20,p=window.innerWidth/2,f=[],x=5,v=0;v<x;v++){var g={};g.speed=d(2,5),f.push(g),console.log(f)}var b=function(){function t(n){var e=n.txt,i=n.x,r=n.y,a=n.txtWidth,o=n.speed;Object(u["a"])(this,t),this.txt=e,this.x=i,this.y=r,this.speed=o,this.txtWidth=a,this.a=.02,this.isDead=!1}return Object(c["a"])(t,[{key:"update",value:function(){this.x=this.x-this.speed,this.x+this.txtWidth<0&&(this.isDead=!0)}}],[{key:"calTxtWidth",value:function(t){var n=t.ctx,e=t.txt;return n.measureText(e).width}},{key:"initDamuList",value:function(){for(var t=0;t<f.length;t++)this.prototype.danmuList.push([])}}]),t}();Object(l["a"])(b,"add",function(t){for(var n=t.ctx,e=t.txt,i={},r=b.calTxtWidth({ctx:n,txt:e}),a=p,o=b.prototype.danmuList,s=0,u=0;u<o.length;u++){if(0===o[u].length){s=u;break}o[u][o[u].length-1].txtWidth+o[u][o[u].length-1].x<o[s][o[s].length-1].txtWidth+o[s][o[s].length-1].x&&(s=u)}var c=o[s][o[s].length-1];c&&(a=c.x+c.txtWidth+h),a<window.innerWidth&&(a=window.innerWidth),i={speed:f[s].speed,txt:e,x:a,y:50*s+50,txtWidth:r};var l=new b(i);b.prototype.danmuList[s].push(l)}),b.prototype.danmuList=[];var y=b,m={data:function(){return{inputTxt:""}},mounted:function(){this.canvas=this.$refs.cavs;var t=this.canvas.getContext("2d");this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,t.font="20px Arial",t.textAlign="start",t.fillStyle="#ffff00",this.ctx=t,y.initDamuList(),this.loop()},methods:{loop:function(){try{requestAnimationFrame(this.loop),this.draw()}catch(t){console.log("[log]==>",t)}},draw:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=y.prototype.danmuList,n=0;n<t.length;n++)for(var e=0;e<t[n].length;e++){var i=t[n][e];if(i.update(),!i.isDead){0;var r=i.txt,a=i.x,o=i.y;this.ctx.fillText(r,a,o)}}},doClick:function(){var t="WTF u r talking about?";y.add({ctx:this.ctx,txt:t})},doSend:function(){this.inputTxt&&y.add({ctx:this.ctx,txt:this.inputTxt}),this.inputTxt=""}}},w=m,O=(e("bd14"),e("2877")),T=Object(O["a"])(w,o,s,!1,null,"8a584b46",null),W=T.exports,j={name:"app",components:{HelloWorld:W}},_=j,k=Object(O["a"])(_,r,a,!1,null,null,null),C=k.exports,P=e("5c96"),S=e.n(P);e("c69f");i["default"].use(S.a);e("a2f0");i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(C)}}).$mount("#app")},a2f0:function(t,n,e){},bd14:function(t,n,e){"use strict";var i=e("347d"),r=e.n(i);r.a},c69f:function(t,n,e){}});
//# sourceMappingURL=app.d47e35df.js.map